<#include "/admin/util/editor/editor.html" />
<#escape x as x?html>
<div class="row-fluid">
	<div class="span3">
		<form method="post" action="jsp/admin/plugins/document/DoCreateDocument.jsp" enctype="multipart/form-data" >
		<input type="hidden" name="document_type_code" value="${document_type}" />    
		<div class="well">            
		<fieldset>
		<legend>#i18n{document.create_document.advancedPropertiesTitle}</legend>
			<p>#i18n{document.create_document.labelDocumentValidity}</p>
			<label for="document_validity_begin">#i18n{document.create_document.labelDocumentValidityBegin}</label>
				<div class="input-prepend">
				<span class="add-on"><i class="icon-calendar"></i></span>
					<input type="text" class="input-small" name="document_validity_begin" id="document_validity_begin" />
				</div>
				<label for="document_validity_begin">#i18n{document.create_document.labelDocumentValidityEnd}</label> 
				<div class="input-prepend">
					<span class="add-on"><i class="icon-calendar"></i></span>
					<input type="text" class="input-small"  name="document_validity_end" id="document_validity_end" />
				</div>
			<label for="document_page_template">#i18n{document.create_document.labelDocumentPageTemplate} : </label>
				<ul class="unstyled"><#noescape>${page_template_list}</#noescape></ul>
				<p class="help-block">#i18n{document.create_document.helpDocumentPageTemplate}</p>
			<label for="document_comment">#i18n{document.create_document.labelDocumentComment} : </label>
				<textarea type="text" name="document_comment" id="document_comment" cols="60" rows="2" ></textarea> 
				<p class="help-block">#i18n{document.create_document.helpDocumentComment}</p>
		</div>
		<#noescape>${category}</#noescape>
		<#if is_commentable == "0">
		<div class="well"> 
			<span id="comments"><i class="icon-chevron-down"></i>&nbsp;#i18n{document.create_document.labelDocumentCommentable}</span>
			<div class="comments-content">
					<label class="checkbox">#i18n{document.create_document.labelDocumentCommentable}
						<input class="checkbox" type="checkbox" name="accept_site_comments" id="accept_site_comments" value="1" title="#i18n{document.create_document.helpDocumentCommentable}"/>
					</label>
					<label class="checkbox">#i18n{document.create_document.labelCommentIsModerated}
						<input class="checkbox" type="checkbox" name="is_moderated_comment" id="is_moderated_comment" value="1" title="#i18n{document.create_document.helpCommentIsModerated}"/>
					</label>
				<#if mailinglists_list?has_content>
					<label class="checkbox">#i18n{document.create_document.labelCommentIsEmailNotified}
						<input class="checkbox" type="checkbox" name="is_email_notified_comment" id="is_email_notified_comment" value="1" title="#i18n{document.create_document.helpCommentIsEmailNotified}"/>
					</label>
					<@combo name="mailinglists" default_value="" items=mailinglists_list />
				<#else>
					<em>#i18n{document.create_document.messageNotificationListNotExist}</em>
				</#if>
			</div>
		</div>
		</#if>
		<#if is_votable?has_content>
			<#include "/admin/plugins/rating/create_resource_add_on.html" />
		</#if>
		<#noescape>${metadata}</#noescape>
	</div>
	<div class="span8">
		<fieldset>
		<legend>#i18n{document.create_document.title} &#34; ${document_type} &#34;</legend>
		<div class="control-group">
		<label class="control-label" for="document_title">#i18n{document.create_document.labelDocumentTitle}* : </label>
			<div class="controls">
				<input type="text" name="document_title" id="document_title" class="input-xlarge" maxlength="255"/>
				<span class="help-text">#i18n{document.create_document.helpDocumentTitle}</span>
			</div>
		</div>
		<div class="control-group">
		<label class="control-label" for="document_summary">#i18n{document.create_document.labelDocumentSummary}* : </label>
			<textarea type="text" name="document_summary" id="document_summary" class="span6" rows="2" ></textarea> 
			<span class="help-text">#i18n{document.create_document.helpDocumentSummary}</span>
		</div>
		</fieldset> 
		<fieldset>
		<legend>#i18n{document.create_document.attributTitle}</legend>    
		<#noescape>${fields}</#noescape>
			<div class="form-actions">
				<button class="btn btn-primary btn-small" type="submit" ><i class="icon-ok icon-white"></i>&nbsp;#i18n{document.create_document.buttonCreate}</button>
				<button class="btn btn-small" type="button" onclick="javascript:history.go(-1)" ><i class="icon-remove-circle"></i>&nbsp;#i18n{portal.admin.message.buttonCancel}</button>
			</div>
		</fieldset>
	</form>
	</div>
</div>
</#escape>
<script src="js/jquery/plugins/ui/jquery-ui-1.8.16.custom.min.js"></script>
<script src="js/jquery/plugins/ui/ui.datepicker-fr.js"></script>
<@getDatePickerRange idFieldFrom="document_validity_begin" idFieldTo="document_validity_end" language=locale />
<script>
$(document).ready( function () {
	$("#dublin_core_meta").next().toggle();
	doToggleId( "#dublin_core_meta" );
	$("#comments").next().toggle();
	doToggleId( "#comments" );
	$("#category").next().toggle();
	doToggleId( "#category" );
});

function doToggleId( idParent ){
	$( idParent ).click( function(){ 
		$(this).next().toggle();
	});
}
</script>