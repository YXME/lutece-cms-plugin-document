<#include "/admin/util/editor/editor.html" />
${extendableResourceActionsHtml!}
<#escape x as x?html>
<div class="row-fluid">
	<div class="span3">
	<form method="post" action="jsp/admin/plugins/document/DoModifyDocument.jsp" enctype="multipart/form-data" >
	<input type="hidden" name="id_document" value="${document.id}" />
	<input type="hidden" name="id_state" value="${id_state}" />  
	<div class="well">            
		<fieldset>
		<legend>#i18n{document.modify_document.advancedPropertiesTitle}</legend>
		<label >#i18n{document.modify_document.labelDocumentValidity}</label>
		<label for="document_validity_begin">#i18n{document.modify_document.labelDocumentValidityBegin}</label>
		<div class="input-prepend">
			<span class="add-on"><i class="icon-calendar"></i></span>
			<input type="text" class="input-small" name="document_validity_begin" id="document_validity_begin" value="${date_validity_begin}" />
		</div>
		<label for="document_validity_begin">#i18n{document.modify_document.labelDocumentValidityEnd}</label> 
		<div class="input-prepend">
			<span class="add-on"><i class="icon-calendar"></i></span>
			<input type="text" class="input-small"  name="document_validity_end" id="document_validity_end" value="${date_validity_end}" />
		</div>
		<label class="control-label" for="document_page_template">#i18n{document.modify_document.labelDocumentPageTemplate} : </label>
		<ul class="unstyled">
			<#noescape>${page_template_list}</#noescape>
		</ul>
		<p class="help-block">#i18n{document.modify_document.helpDocumentPageTemplate}</p>
		<label class="control-label" for="document_comment">#i18n{document.modify_document.labelDocumentComment} : </label>
		<textarea type="text" name="document_comment" id="document_comment" cols="60" rows="2" >${document.comment}</textarea> 
		<p class="help-block">#i18n{document.modify_document.helpDocumentComment}</p>
		</fieldset>
	</div>
	<#noescape>${category}</#noescape>
	<#if is_commentable == "0">
	<div class="well"> 
		<span id="comments"><i class="icon-chevron-down"></i>&nbsp;#i18n{document.modify_document.labelDocumentCommentable}</span>
		<div class="comments-content">
			<label class="checkbox">#i18n{document.modify_document.labelDocumentCommentable}
				<input class="checkbox" type="checkbox" name="accept_site_comments" id="accept_site_comments" <#if accept_site_comments = 1 >checked="checked"</#if> value="1" title="#i18n{document.modify_document.helpDocumentCommentable}"/>
			</label>
			<label class="checkbox">#i18n{document.modify_document.labelCommentIsModerated}
				<input class="checkbox" type="checkbox" name="is_moderated_comment" id="is_moderated_comment" <#if is_moderated_comment = 1 >checked="checked"</#if> value="1" title="#i18n{document.modify_document.helpCommentIsModerated}"/>
			</label>
		<#if mailinglists_list?has_content>
			<label class="checkbox">#i18n{document.modify_document.labelCommentIsEmailNotified}
				<input class="checkbox" type="checkbox" name="is_email_notified_comment" id="is_email_notified_comment" <#if is_email_notified_comment = 1 >checked="checked"</#if> value="1" title="#i18n{document.modify_document.helpCommentIsEmailNotified}"/>
			</label>
			<@comboWithParams name="mailinglists" default_value="" items=mailinglists_list additionnalParameters=class="\"span2\"" />
		<#else>
			<em>#i18n{document.modify_document.messageNotificationListNotExist}</em>
		</#if>
		</div>
	</div>
	</#if>
	<#if is_votable?has_content>
	<div class="well"> 
		<#include "/admin/plugins/rating/modify_resource_add_on.html" />
	</div>
	</#if>
	<#noescape>${metadata}</#noescape>
	</div>
<div class="span8">
<fieldset>
<legend>
	#i18n{document.modify_document.title} &#34; ${document.title} &#34;
	<button class="btn btn-primary pull-right" type="submit" >
	<i class="icon-edit icon-white"></i>
	&nbsp;#i18n{document.modify_document.buttonModify}
	</button>
</legend>
<div class="control-group">
<label class="control-label" for="document_title">#i18n{document.modify_document.labelDocumentTitle}* : </label>
<div class="controls">
<input type="text" name="document_title" id="document_title" value="${document.title}" class="input-xlarge" maxlength="255"/>
<p class="help-block">#i18n{document.modify_document.helpDocumentTitle}</p>
</div>
</div>
<div class="control-group">
<label class="control-label" for="document_summary">#i18n{document.modify_document.labelDocumentSummary}* : </label>
<textarea type="text" name="document_summary" id="document_summary" class="input-xlarge" rows="2" >${document.summary}</textarea> 
<p class="help-block">#i18n{document.modify_document.helpDocumentSummary}</p>
</div>
</fieldset> 
<fieldset>
<legend>#i18n{document.modify_document.attributTitle}</legend>    
 <#noescape>${fields}</#noescape>
 <div class="form-actions">
<button class="btn btn-primary" type="submit" ><i class="icon-edit icon-white"></i>#i18n{document.modify_document.buttonModify}</button>
<button class="btn" type="button" onclick="javascript:window.history.back()" ><i class=" icon-remove-circle"></i>#i18n{portal.admin.message.buttonCancel}</button>
</div>
</fieldset>

</form>
</div>
</div>
</#escape>
<script src="js/jquery/plugins/ui/jquery-ui-1.8.16.custom.min.js"></script>
<script src="js/jquery/plugins/ui/ui.datepicker-fr.js"></script>
<@getDatePickerRange idFieldFrom="document_validity_begin" idFieldTo="document_validity_end" language=locale />
<script>
$(document).ready( function () {
	$("#dublin_core_meta").next().toggle();
	doToggleId( "#dublin_core_meta" );
	$("#comments").next().toggle();
	doToggleId( "#comments" );
	$("#category").next().toggle();
	doToggleId( "#category" );
});

function doToggleId( idParent ){
	$( idParent ).click( function(){ 
		$(this).next().toggle();
	});
}
</script>