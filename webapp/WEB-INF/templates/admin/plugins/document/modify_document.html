<#escape x as x?html>
<div class="row" id="document-extend-bar">
	<div class="col-md-12">
		<div class="btn-toolbar" role="toolbar">
			<#noescape>
				<#if extendableResourceActionsHtml?? && extendableResourceActionsHtml?has_content>
					<div class="pull-right">
						<div class="btn-group">
							${extendableResourceActionsHtml!}
						</div>
					</div>
				</#if>
			</#noescape>
		</div>
	</div>
</div>
<form method="post" class="form-horizontal" action="jsp/admin/plugins/document/DoModifyDocument.jsp" enctype="multipart/form-data" >
<div class="row">
	<div class="col-xs-12 col-sm-12 col-md-3">
			<input type="hidden" name="id_document" value="${document.id}">
			<input type="hidden" name="id_state" value="${id_state}">
			<div class="well well-sm">
				<fieldset>
					<legend id="properties">
						<i class="glyphicon glyphicon-chevron-down"></i>&nbsp; #i18n{document.modify_document.advancedPropertiesTitle}
					</legend>
					<div id="properties-content"> 
						<label>#i18n{document.modify_document.labelDocumentValidity}</label>
						<label for="document_validity_begin">#i18n{document.modify_document.labelDocumentValidityBegin}</label>
						<div class="input-group">
							<span class="add-on"><i class="glyphicon glyphicon-calendar"></i></span>
							<input type="text" class="input-sm" name="document_validity_begin" id="document_validity_begin" value="${date_validity_begin}">
						</div>
						<label for="document_validity_begin">#i18n{document.modify_document.labelDocumentValidityEnd}</label> 
						<div class="input-group">
							<span class="add-on"><i class="glyphicon glyphicon-calendar"></i></span>
							<input type="text" class="input-sm"  name="document_validity_end" id="document_validity_end" value="${date_validity_end}">
						</div>
						<label class="control-label" for="document_page_template">#i18n{document.modify_document.labelDocumentPageTemplate}</label>
						<ul class="unstyled">
							<#noescape>${page_template_list}</#noescape>
						</ul>
						<p class="help-block">#i18n{document.modify_document.helpDocumentPageTemplate}</p>
						<label class="control-label" for="document_comment">#i18n{document.modify_document.labelDocumentComment}</label>
						<textarea type="text" name="document_comment" id="document_comment" cols="60" rows="2" >${document.comment}</textarea> 
						<p class="help-block">#i18n{document.modify_document.helpDocumentComment}</p>
					</div>
				</fieldset>
			</div>
		<#noescape>${category}</#noescape>
	</div>
	<#if metadata?has_content >
		<div class="col-xs-12 col-sm-12 col-md-6">
	<#else>
		<div class="col-xs-12 col-sm-12 col-md-9">
	</#if>
		<div class="well well-small">
			<div class="row">
				<div class="col-xs-12 col-sm-12 col-md-12">
				<fieldset>
					<legend><small>#i18n{document.modify_document.title}</small> ${document.title}</legend>
					<div class="form-group">
						<label class="control-label col-xs-12 col-sm-2 col-md-2" for="document_title">#i18n{document.modify_document.labelDocumentTitle}* </label>
						<div class="col-xs-12 col-sm-10 col-md-10">
							<input type="text" class="form-control" name="document_title" id="document_title" value="${document.title}" class="input-lg" maxlength="255">
							<p class="help-block">#i18n{document.modify_document.helpDocumentTitle}</p>
						</div>
					</div>
					<div class="form-group">
						<label class="control-label col-xs-12 col-sm-2 col-md-2" for="document_summary">#i18n{document.modify_document.labelDocumentSummary}*</label>
							<div class="col-xs-12 col-sm-10 col-md-10">
								<textarea name="document_summary" class="form-control" id="document_summary" class="input-lg" rows="5">${document.summary}</textarea> 
								<p class="help-block">#i18n{document.modify_document.helpDocumentSummary}</p>
							</div>
					</div>
				</fieldset>
				<fieldset>
					<legend>#i18n{document.modify_document.attributTitle}</legend>    
					<#noescape>${fields}</#noescape>
					<div class="form-group" >
						<div class="col-xs-12 col-sm-offset-2 col-sm-10 col-md-offset-3 col-md-9">
							<button class="btn btn-primary btn-sm" type="submit">
								<i class="glyphicon glyphicon-edit"></i> #i18n{document.modify_document.buttonModify}
							</button>
							<button class="btn btn-default btn-sm" type="button" onclick="javascript:window.history.back()">
								<i class="glyphicon glyphicon-remove-circle"></i> #i18n{portal.admin.message.buttonCancel}
							</button>
						</div>
					</div>
					</fieldset>
				</div>
			</div>
		</div>
	</div>
	<#if metadata?has_content >
		<div class="col-xs-12 col-sm-12 col-md-3">
			  <#noescape>${metadata}</#noescape>
		</div>
	</#if>
</div>
</form>
</#escape>
<script src="js/jquery/plugins/ui/jquery-ui-1.9.2.custom.min.js"></script>
<script src="js/jquery/plugins/ui/ui.datepicker-${locale}.js"></script>
<#include "/admin/util/editor/editor.html" />
<@initEditor />
<@getDatePickerRange idFieldFrom="document_validity_begin" idFieldTo="document_validity_end" language=locale />
<script>
function doToggleId( idParent ){
	$( idParent ).click( function(){ 
		$(this).next().toggle();
		$(this).children().toggleClass("glyphicon-chevron-down glyphicon-chevron-up");
	});
}

$(document).ready( function () {
	doToggleId( "#category" );
	doToggleId( "#dublin_core_meta" );
	doToggleId( "#properties" );
});
</script>