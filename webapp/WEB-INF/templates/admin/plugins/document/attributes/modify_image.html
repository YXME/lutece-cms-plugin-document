<#if !attribute.textValue?has_content>
	<#assign helpKey = attribute.description />
</#if>
<@formGroup formStyle='' labelFor='${attribute.code}' labelKey='${attribute.name}' helpKey=helpKey! mandatory=attribute.required>
	<@row>
		<@columns sm=8>
			<@input type='file' name='${attribute.code}' id='${attribute.code}' />
		</@columns>
		<@columns sm=12>
			<#if attribute.textValue?has_content>
				<@row>
					<@columns sm=8>
						<@formGroup helpKey='#i18n{document.attributeType.image.deleteField}'>
							<@checkBox labelFor='update_${attribute.code}' labelKey='#i18n{document.attributeType.image.updateField}' name='update_${attribute.code}' id='update_${attribute.code}' value='1' />
						</@formGroup>
					</@columns>
					<@columns sm=4>
						<#assign params = 'data-title="${attribute.textValue}"' />
						<#if attribute.valueContentType?contains('image')>
							<#assign params += ' data-lightbox="image-document"' />
						</#if>
						<@link href='servlet/plugins/document/resource?id=${document.id}&id_attribute=${attribute.id}&working_content=true' params=params>
						   <img src='<@getDocumentThumbnailUrlFromMimeType mimeType=attribute.valueContentType fileUrl="servlet/plugins/document/resource?id=${document.id}&id_attribute=${attribute.id}&working_content=true" />' alt="${attribute.textValue}" title="${attribute.textValue}" class="thumbnail thumblist-lg pull-right clearfix" style="max-width:100%;" />
						</@link>
					</@columns>
				</@row>
			</#if>
			<@formGroup>
				<@checkBox labelFor='${attribute.code}_crop' labelKey='#i18n{document.attributeType.image.resize}' name='${attribute.code}_croppable' id='${attribute.code}_crop' />
			</@formGroup>
			<@formGroup labelKey='#i18n{document.attributeType.image.resize}' hideLabel=['all']>
				<@inputGroup>
					<@input type='text' name='${attribute.code}_width' id='${attribute.code}_width' value='' placeHolder='#i18n{document.attributeType.image.width}' />
					<@inputGroupItem type='text'>px</@inputGroupItem>
				</@inputGroup>
			</@formGroup>
		</@columns>
	</@row>
</@formGroup>
<script type="text/javascript">
$( function () {
	$("#${attribute.code}_width").prop({disabled: true});
	$("#${attribute.code}_width").addClass('disabled');
	$('#${attribute.code}_crop').on('click', function () {
		if ($(this).is(':checked')) {
			$("#${attribute.code}_width").prop({disabled: false});
			$("#${attribute.code}_width").toggleClass("disabled");
		} else {
			$("#${attribute.code}_width").val("");
			$("#${attribute.code}_width").prop({disabled: true});
			$("#${attribute.code}_width").toggleClass("disabled");
		}
	});
});
</script>