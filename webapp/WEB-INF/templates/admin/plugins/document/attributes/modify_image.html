<div class="control-group">
    <label class="control-label" for="${attribute.code}">${attribute.name}<#if attribute.required >*</#if></label>
    <div class="controls">
    <#if attribute.textValue?has_content>
        <a href="document?id=${document.id}&id_attribute=${attribute.id}&working_content=true">
            <img src='<@getThumbnailUrlFromMimeType mimeType=attribute.valueContentType fileUrl="document?id=${document.id}&id_attribute=${attribute.id}&working_content=true" />' alt="${attribute.textValue}" width="40" height="40" />
            &nbsp;${attribute.description}
        </a>
        <input type="file" name="${attribute.code}" id="${attribute.code}" >
        <label class="checkbox" for="update_${attribute.code}">
           <input type="checkbox" name="update_${attribute.code}" id="update_${attribute.code}" value="1" />
           #i18n{document.attributeType.image.updateField}
        </label>
        <p class="help-block">#i18n{document.attributeType.image.deleteField}</p>
    <#else>
        <input type="file" name="${attribute.code}" id="${attribute.code}" />
        <p class="help-block">${attribute.description}</p>
    </#if>
    </div>
    <div class="controls">
    <label for="crop" class="help-text">
        <input type="checkbox" name="${attribute.code}_croppable" id="crop" onchange="displaySize();">
         #i18n{document.attributeType.image.resize}</label>
    </div>
    <div class="controls">
        <label for="size" class="help-text">
        <input type="text" name="${attribute.code}_width" id="width" class="input-mini" disabled="disabled">
        #i18n{document.attributeType.image.width}</label>
    </div>
</div>

<script type="text/javascript">
function displaySize () {
    var checked = $('#crop').attr('checked'); 
    $("#width").val("");
    if (checked == "checked") {
        $("#width").prop("disabled", false);
    } else {
        $("#width").prop("disabled", true);
    }
}

</script>